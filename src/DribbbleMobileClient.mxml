<?xml version="1.0" encoding="utf-8"?>
<s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
								  xmlns:s="library://ns.adobe.com/flex/spark"
								  xmlns:dribble="services.dribbbleService.*"
								  xmlns:dribbbleservice="services.dribbbleservice.*"
								  creationComplete="creationCompleteHandler(event)"
								  >
	
	<fx:Style source="styles/DribbbleMobileClient.css"/>
	
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			
			import spark.managers.PersistenceManager;
			
			import utils.BookmarkRepository;
			
			private var _bookmarkRepository:BookmarkRepository = new BookmarkRepository();
			
			private function creationCompleteHandler(event:FlexEvent):void {
				_bookmarkRepository.getSavedBookmarks();
			
				NativeApplication.nativeApplication.addEventListener(Event.DEACTIVATE, onDeactivateApp);	
			}
			
			private function onDeactivateApp(event:Event):void {
				_bookmarkRepository.saveBookmarks();
				
				//trace("nibbble client deactivated");
				//NativeApplication.nativeApplication.exit();
			}
			
		]]>
	</fx:Script>

	
	
	
	<!--<s:ViewNavigator label="home" width="100%" height="100%" firstView="views.HomeView"/>-->
	<s:ViewNavigator label="popular" width="100%" height="100%" firstView="views.MenuView"/>
	<!--<s:ViewNavigator label="players" width="100%" height="100%" firstView="views.PlayerView"/>-->
	
</s:TabbedViewNavigatorApplication>
